<body>

<!-- background video -->
<div class="bg-video" aria-hidden="true">
  <video autoplay muted loop playsinline>
    <source src="media/bg.mp4" type="video/mp4">
  </video>
</div>

<div class="energy-flow" aria-hidden="true"></div>

<!-- Top navigation -->
<header class="nav">
  <a class="logo" href="index.html">MG</a>
  <nav class="links" aria-label="Main navigation">
    <a href="about.html">About</a>
    <a href="track_record.html" class="active">Track record</a>
    <a href="partners.html">Partners</a>
    <a href="media.html">Media</a>
    <a href="powerbooks.html">Powerbooks</a>
    <a href="contact.html">Contact</a>
  </nav>
</header>

<!-- Main content -->
<main class="hero" role="main" aria-live="polite">
  <h1>Achievements</h1>
  <p class="lead">Track record, championships and speed records — performance and precision.</p>

  <!-- Stats / Glass LED Panels -->
  <div class="stats-block" role="list" aria-label="Top statistics">

    <!-- WORLD CHAMP -->
    <div class="stat-card" role="listitem" id="card1" aria-label="World champion count" data-target="5">
      <h2 id="champWorld">
        <span id="champWorldVal">0</span>
        <small style="margin-left:6px; font-size:14px; opacity:.85">x</small>
      </h2>
      <p>Race World Champion</p>
      <div class="hud-circle" style="left:12px; top:12px;"></div>
    </div>

    <!-- EUROPEAN CHAMP -->
    <div class="stat-card" role="listitem" id="card2" aria-label="European champion count" data-target="4">
      <h2 id="champEuro">
        <span id="champEuroVal">0</span>
        <small style="margin-left:6px; font-size:14px; opacity:.85">x</small>
      </h2>
      <p>Race European Champion</p>
      <div class="hud-circle" style="right:12px; bottom:12px;"></div>
    </div>

    <!-- SPEED CARD -->
    <div class="stat-card" role="listitem" id="speedCard" aria-label="Speed record" data-target="41.40">
      <h2 id="speedNumber">
        <span id="speedVal">0.00</span>
        <small style="margin-left:6px; font-size:14px; opacity:.85">kts</small>
      </h2>
      <p>World First Speed Holder<br><span style="opacity:.85; font-weight:700">41.40 knots (77 km/h)</span></p>

      <div class="speed-boost-line s1"></div>
      <div class="speed-boost-line s2"></div>
      <div class="speed-boost-line s3"></div>
    </div>
  </div>

  <!-- Timeline -->
  <section class="timeline-wrap" aria-label="Timeline">

    <div class="timeline-line" aria-hidden="true"></div>

    <svg class="timeline-wake" viewBox="0 0 300 1000" preserveAspectRatio="xMidYMid slice" aria-hidden="true">
      <defs>
        <linearGradient id="g1" x1="0" x2="1">
          <stop offset="0" stop-color="#60a5fa" stop-opacity="0.85"/>
          <stop offset="1" stop-color="#0ea5ff" stop-opacity="0.12"/>
        </linearGradient>
      </defs>
      <path id="wakePath" d="M10 0 C80 60 120 120 150 200 C190 320 120 420 100 520 C80 640 120 760 140 880" fill="none" stroke="url(#g1)" stroke-width="18" stroke-linecap="round" stroke-linejoin="round" stroke-opacity="0.35"/>
    </svg>

    <!-- 2022 -->
    <div class="year-block" data-year="2022">
      <div class="year-dot" aria-hidden="true"></div>
      <div>
        <div class="year-header" tabindex="0" role="button" aria-expanded="false" aria-controls="y2022">2022 <span class="mini">— major wins</span></div>
        <div class="results" id="y2022" aria-hidden="true">
          <ul>
            <li class="world">Wingfoil Racing World Champion</li>
            <li class="europe">GWA Race European champion</li>
            <li class="first">1st at GWA World Cup</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- 2023 -->
    <div class="year-block" data-year="2023">
      <div class="year-dot" aria-hidden="true"></div>
      <div>
        <div class="year-header" tabindex="0" role="button" aria-expanded="false" aria-controls="y2023">2023 <span class="mini">— breakthrough</span></div>
        <div class="results" id="y2023" aria-hidden="true">
          <ul>
            <li class="world">Double Wingfoil Racing World Champion</li>
            <li class="europe">Formula Wing European champion</li>
            <li class="first">3× 1st at Wingfoil Racing World Cups</li>
            <li class="first">1st at Defi Wing Superstars</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- 2024 -->
    <div class="year-block" data-year="2024">
      <div class="year-dot" aria-hidden="true"></div>
      <div>
        <div class="year-header" tabindex="0" role="button" aria-expanded="false" aria-controls="y2024">2024 <span class="mini">— dominance</span></div>
        <div class="results" id="y2024" aria-hidden="true">
          <ul>
            <li class="world">Triple Wingfoil Racing World Champion</li>
            <li class="europe">Double Formula Wing European champion</li>
            <li class="first">3× 1st at Wingfoil Racing World Cups</li>
            <li class="first">1st at Defi Wing</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- 2025 -->
    <div class="year-block" data-year="2025">
      <div class="year-dot" aria-hidden="true"></div>
      <div>
        <div class="year-header" tabindex="0" role="button" aria-expanded="false" aria-controls="y2025">2025 <span class="mini">— latest</span></div>
        <div class="results" id="y2025" aria-hidden="true">
          <ul>
            <li class="world">Quadruple Wingfoil Racing World Champion</li>
            <li class="worldcup">Formula Wing World Champion</li>
            <li class="europe">Triple Formula Wing European champion</li>
            <li class="first">2× 1st at Wingfoil Racing World Cups</li>
            <li class="first">1st at Defi Wing</li>
          </ul>
        </div>
      </div>
    </div>

  </section>

</main>

<footer style="text-align:center; padding:36px 6vw; color:#9fbff7; opacity:.6; font-size:13px">© Wingfoil Racing / Robert Hadjuk</footer>


<!-- =========================== -->
<!--           SCRIPTS           -->
<!-- =========================== -->

<script>
/* ---------------------------------------------
   YEAR TOGGLE ACCESSIBILITY
--------------------------------------------- */
document.querySelectorAll('.year-header').forEach(header=>{
  header.addEventListener('click', ()=> toggleYear(header));
  header.addEventListener('keydown', (e)=> { if(e.key==='Enter' || e.key===' ') { e.preventDefault(); toggleYear(header); }});
});
function toggleYear(header){
  const targetId = header.getAttribute('aria-controls');
  const el = document.getElementById(targetId);
  const expanded = header.getAttribute('aria-expanded') === 'true';
  header.setAttribute('aria-expanded', String(!expanded));
  if(!expanded){
    el.classList.add('open'); el.setAttribute('aria-hidden','false');
    gsap.fromTo(el, {y:10, opacity:0}, {y:0, opacity:1, duration:.45, ease:'power2.out'});
  } else {
    el.classList.remove('open'); el.setAttribute('aria-hidden','true');
  }
}

/* ---------------------------------------------
   GSAP SCROLLTRIGGER & CARD ENTRANCES
--------------------------------------------- */
gsap.registerPlugin(ScrollTrigger);

const wakePath = document.querySelector('#wakePath');
if(wakePath){
  const length = wakePath.getTotalLength();
  wakePath.style.strokeDasharray = length;
  wakePath.style.strokeDashoffset = length;
  gsap.to(wakePath, {
    strokeDashoffset: 0, duration: 2.2, ease:'power2.out',
    scrollTrigger:{ trigger: '.timeline-wrap', start: 'top 92%', once:true }
  });
  gsap.to(wakePath, { strokeOpacity: 0.45, duration: 2.4, yoyo:true, repeat:-1, ease:'sine.inOut' });
}

gsap.utils.toArray('.year-block').forEach((el, i) => {
  gsap.fromTo(el, {opacity:0, x:-28}, {
    opacity:1, x:0, duration:0.8, delay:i*0.06, ease:'power3.out',
    scrollTrigger:{ trigger: el, start:'top 92%' }
  });
});

gsap.utils.toArray('.stat-card').forEach((card, i)=>{
  gsap.fromTo(card, {y:36, opacity:0}, {
    y:0, opacity:1, duration:0.9, delay:0.12 + i*0.12, ease:'power3.out',
    scrollTrigger:{ trigger: card, start:'top 85%' }
  });
});

/* ---------------------------------------------
   COUNTERS (LOAD) + FORMATTING
--------------------------------------------- */
const champWorldEl = document.getElementById('champWorldVal');
const champEuroEl  = document.getElementById('champEuroVal');
const speedValEl   = document.getElementById('speedVal');

const champWorldTarget = 5;
const champEuroTarget  = 4;
const speedTarget = 41.40;
const speedDecimals = 2;

function animateNumber({ from=0, to=1, duration=1.2, decimals=0, onUpdate=null, onComplete=null }) {
  const obj = { val: from };
  return gsap.to(obj, {
    val: to,
    duration: duration,
    ease: "power2.out",
    onUpdate: () => {
      const display = Number(obj.val).toFixed(decimals);
      if(onUpdate) onUpdate(display);
    },
    onComplete: onComplete
  });
}

// On load
window.addEventListener('load', () => {
  animateNumber({
    from: 0, to: champWorldTarget, duration: 1.6, decimals: 0,
    onUpdate: (v) => champWorldEl.textContent = parseInt(v,10)
  });
  animateNumber({
    from: 0, to: champEuroTarget, duration: 1.6, decimals: 0,
    onUpdate: (v) => champEuroEl.textContent = parseInt(v,10)
  });
  animateNumber({
    from: 0, to: speedTarget, duration: 1.9, decimals: speedDecimals,
    onUpdate: (v) => speedValEl.textContent = Number(v).toFixed(speedDecimals)
  });
});

/* ---------------------------------------------
   SPEED CARD HOVER
--------------------------------------------- */
const speedCard = document.getElementById('speedCard');
let hoverTween = null;

function playBoostLines() {
  gsap.killTweensOf('.speed-boost-line');
  gsap.fromTo('.speed-boost-line', {x:-40, opacity:0}, {
    x:220, opacity:1, duration:0.45, stagger:0.08, ease:'power4.out',
    onComplete: ()=> gsap.to('.speed-boost-line',{opacity:0, duration:0.35})
  });
}

speedCard.addEventListener('mouseenter', () => {
  if(hoverTween) hoverTween.kill();
  hoverTween = animateNumber({
    from: 0, to: speedTarget, duration: 0.9, decimals: speedDecimals,
    onUpdate: (v) => speedValEl.textContent = Number(v).toFixed(speedDecimals)
  });
  playBoostLines();
});

speedCard.addEventListener('mouseleave', () => {
  if(hoverTween) hoverTween.kill();
  animateNumber({
    from: parseFloat(speedValEl.textContent),
    to: speedTarget,
    duration: 0.6,
    decimals: speedDecimals,
    onUpdate: (v) => speedValEl.textContent = Number(v).toFixed(speedDecimals)
  });
});

/* ---------------------------------------------
   HOVER FOR WORLD + EURO COUNTERS
--------------------------------------------- */
const card1 = document.getElementById('card1');
const card2 = document.getElementById('card2');

let hoverWorld = null;
let hoverEuro  = null;

// WORLD
card1.addEventListener('mouseenter', () => {
  if (hoverWorld) hoverWorld.kill();
  hoverWorld = animateNumber({
    from: 0,
    to: champWorldTarget,
    duration: 1.0,
    decimals: 0,
    onUpdate: (v) => champWorldEl.textContent = parseInt(v,10)
  });
});
card1.addEventListener('mouseleave', () => {
  if (hoverWorld) hoverWorld.kill();
  animateNumber({
    from: parseInt(champWorldEl.textContent),
    to: champWorldTarget,
    duration: 0.6,
    decimals: 0,
    onUpdate: (v) => champWorldEl.textContent = parseInt(v,10)
  });
});

// EURO
card2.addEventListener('mouseenter', () => {
  if (hoverEuro) hoverEuro.kill();
  hoverEuro = animateNumber({
    from: 0,
    to: champEuroTarget,
    duration: 1.0,
    decimals: 0,
    onUpdate: (v) => champEuroEl.textContent = parseInt(v,10)
  });
});
card2.addEventListener('mouseleave', () => {
  if (hoverEuro) hoverEuro.kill();
  animateNumber({
    from: parseInt(champEuroEl.textContent),
    to: champEuroTarget,
    duration: 0.6,
    decimals: 0,
    onUpdate: (v) => champEuroEl.textContent = parseInt(v,10)
  });
});

/* ---------------------------------------------
   NAV SHADOW ON SCROLL
--------------------------------------------- */
const header = document.querySelector('header.nav');
window.addEventListener('scroll', ()=>{
  header.style.boxShadow = window.scrollY > 12
    ? '0 10px 30px rgba(2,6,23,0.6)'
    : 'none';
});
</script>

</body>
